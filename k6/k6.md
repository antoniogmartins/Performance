# K6 - Testes de Performance (Stress/Carga/Pico) incluindo o SmokeTests

ğŸš€ Collections:
#### Nome do Arquivo: Bookers Exportado.postman_collection.json

### ğŸš€ Cadastro/Consulta de Bookers
## ğŸ”– Requisitos funcionais
- [X] Deve retornar os bookingid ao cadastrar um novo booker
- [X] Deve retornar 201 ao cadastrar um novo booker
- [X] Deve retornar 400 ao tentar cadastrar com o payload vazio ou incompleto
- [X] Deve retornar 400 se o campo depositpaid ou o totalprice estiver(em) nulo(s)
- [X] Deve retornar 200 ao buscar por todos os bookers cadastrados
- [X] Deve retornar 400 ao tentar pesquisar pelos bookers cadastrados utilizando um hostname invÃ¡lido 

| campos             | descriÃ§Ã£o                             | tipo     | obrigatÃ³rio |
| :----------------- | :------------------------------------ | :------- | :---------- |
| firstname          | primeiro nome ao cadastrar um booker  | texto    | sim         |
| lastname           | segundo nome ao cadastrar um booker   | texto    | sim         |
| totalprice         | preco total                           | numero   | sim         |
| depositpaid        | valor do pagamento do deposito        | valor    | sim         |
| bookingdates       | data do booking                       | data     | sim         |
| checking           | data do checking                      | data     | sim         |
| checkout           | data do checkout                      | data     | sim         |
| additionaneeds     | necessidades adicionais               | texto    | sim         |

## ğŸ”– Requisitos nÃ£o funcionais
### Cadastro do Booker

- [X] O cadastro com sucesso deve ocorrer em atÃ© 2 segundo(s)
- [X] Cadastros sem sucesso devem ocorrer em atÃ© 2 segundo(s)
- [X] Deve poder cadastrar atÃ© 1000 bookers simultÃ¢neos
- [X] A margem de erro no cadastro deve ser de pelo menos 2%

### Consulta pelos Bookers

- [X] A Cnsulta realizada com sucesso deve ocorrer em atÃ© 1 segundo(s)
- [X] As Consulta sem sucesso devem ocorrer em atÃ© 1 segundo(s)
- [X] Deve poder Consultar por todos bookers cadastrados de forma simulatanea
- [X] A margem de erro na consulta deve ser de pelo menos 1%

## ğŸš€ Tecnologias
- [Restfull-Broker] - Local onde se encontra disponibilizada a Api
- [k6] - ferramenta utilzada para criacao dos scritps de testes automatizados considerando os teste de carga, performance, stress etc...
- [Geracao de massa] - para a geracao de massa dinamica, poderiamos ter utilizado o uuuid ou o randomString
  Fontes:
  
  => https://k6.io/docs/examples/generating-uuids/

  => https://k6.io/docs/javascript-api/jslib/utils/

## ğŸ‘¨ğŸ»â€ğŸ’» Como executar os testes de performance em cima das apis, do projeto booker
- FaÃ§a download e instale o K6 em seu computador
- Crie uma pasta em seu computador, 
- Baixe os scripts de testes automatizados dentro desta pasta utilizando o seguinte comando:
  Git clone <<nome_projeto>>
- Dentro do projeto, na pasta "Scripts_Testes" >> "k6_pap_teste_carga_performance.js"
  execute a seguinte linha de comando:
  Ex:
  Para rodar os testes
  k6 run <<k6_pap_teste_carga_performance.js>>
  
  Para simular utilizando 10 usuarios(vus) em 30 segundos(duration):  
  k6 run --vus 10 --duration 30s <<k6_pap_teste_carga_performance.js>>

Obs.: Ã‰ preciso que vc esteja conectado a internet

## ğŸ”– AnÃ¡lise do Smoke Tests realizados
Apos considerar a execucao dos smoke testes realizados utilizando 1 usuario, durante 60 segundos, observamos que: 
- [X] Consideramos uma requisicao utilizando o metodo POST e o metodo GET
- [X] Foi considerado um sleep de 0.3s entre os requests  
- [X] NÃ£o foram apresentadas falhas durante a execucao dos testes
- [X] Foram realizadas validaÃ§Ãµes sobre o status code com sucesso - smoke tests
- [X] A quantidade de dados recebidos foi de 1.2mb e enviados 31Kb para o servidor
- [X] A media do tempo total de envio/recebimento dos dados foi de 538ms
- [X] Atingimos a quantidade de 51 requisicoes durante este perido de 1m01.7ss
- [X] Observamos que tivemos picos de 423.67s (Considerando os 2 requests)

## ğŸš€ Evidencia dos Smoke Tests executados

![k6_smoke_test_01](https://github.com/antoniogmartins/Performance/assets/35534493/1747d924-600d-47cf-8609-516cae5d8588)

![k6_smoke_test_02](https://github.com/antoniogmartins/Performance/assets/35534493/b7eebc97-9062-4814-afdc-0841427e0973)


## ğŸ”– AnÃ¡lise dos Testes de Stress realizados
Ja para os testes de carga, utilizamos o seguinte range de testes: 
    
    { duracao: '20s', com 10 usuÃ¡rios },
    
    { duracao: '20s', com 40 usuÃ¡rios },
    
    { duracao: '20s', com 90 usuÃ¡rios },
    
    { duracao: '20s', com 160 usuÃ¡rios }

Apos considerar a execucao da bateria dos Testes de Stress mencionado acima, observamos que: 
- [X] Consideramos uma requisicao utilizando o metodo POST e o metodo GET
- [X] Foi considerado o sleep de 0.3s entre os requests  
- [X] NÃ£o foram apresentadas falhas dos requests durante a execucao dos testes
- [X] Foi apresentadas uma falha quanto a http_req_duration = tempo de resposta superou 1000s
- [X] Foram realizadas validaÃ§Ãµes sobre o status code com sucesso
- [X] A quantidade de dados recebidos foi de 57mb e enviados 688Kb para o servidor
- [X] A media do tempo total de envio/recebimento dos dados foi de 33,91ms
- [X] Atingimos a quantidade de 1060 requisicoes durante este perido de 1m33s
- [X] Observamos que tivemos picos de 6.06s (Considerando os 2 requests)

## ğŸš€ Evidencia dos testes de Stress executados

![Captura de ecrÃ£ de 2023-12-06 06-06-52](https://github.com/antoniogmartins/Performance/assets/35534493/b87b4aed-3447-4fca-be63-3485f8cec505)

![Captura de ecrÃ£ de 2023-12-06 06-08-08](https://github.com/antoniogmartins/Performance/assets/35534493/45306cc9-eb3b-44ae-826c-f37a3f00d854)


## ğŸ”– AnÃ¡lise dos Testes de Carga realizados
Ja para os testes de carga, utilizamos o seguinte range de testes: 
    
    { duracao: '20s', com 30 usuÃ¡rios },
    
    { duracao: '1m', com 50 usuÃ¡rios },
    
    { duracao: '2m', com 100 usuÃ¡rios },
    
    { duracao: '1m', com 50 usuÃ¡rios },
    
    { duracao: '5s', com 20 usuÃ¡rios }
    
- [X] Consideramos uma requisicao utilizando o metodo POST e o metodo GET
- [X] Foi considerado o sleep de 0.3s entre os requests  
- [X] Foi apresentadas uma falha quanto a http_req_failed = falhas no envio retorno das apis em torno de 41.37%
- [X] Foi apresentadas uma falha quanto a http_req_duration = tempo de resposta superou 1000s
- [X] A quantidade de dados recebidos foi de 111mb e enviados 568Kb para o servidor
- [X] A media do tempo total de envio/recebimento dos dados foi de 58,99s
- [X] Atingimos a quantidade de 1829 requisicoes durante este perido de 4m55s
- [X] Observamos que tivemos picos de 17.09s (Considerando os 2 requests)

## ğŸš€ Evidencia dos Testes de Carga executados

![k6_carga_test_01](https://github.com/antoniogmartins/Performance/assets/35534493/bbda7a02-e270-4dfd-880d-0deb962b1c1d)

![k6_carga_test_02](https://github.com/antoniogmartins/Performance/assets/35534493/312a2917-a036-49d8-b22d-478e56b028f0)


## ğŸ”– AnÃ¡lise dos Testes de Pico realizados
Ja para os testes de carga, utilizamos o seguinte range de testes: 
    
    { duracao: '1m', com 20 usuÃ¡rios },
    
    { duracao: '2m', com 150 usuÃ¡rios },
    
    { duracao: '1m', com 20 usuÃ¡rios }
    
- [X] Consideramos uma requisicao utilizando o metodo POST e o metodo GET
- [X] Foi considerado um sleep de 0.3s entre os requests
- [X] Foi apresentada uma falha quanto a http_req_duration = tempo de resposta superou 1000s
- [X] Foram realizados validaÃ§Ãµes sobre o status code com algumas falhas
- [X] A quantidade de dados recebidos foi de 174mb mb e enviados 1.9mb para o servidor
- [X] A media do tempo total de envio/recebimento dos dados foi de 39,03s
- [X] Chegamos a um total de 150 usuÃ¡rios simultaneos
- [X] Atingimos a quantidade de 3105 requisicoes durante este perido de 4m02.2s
- [X] Observamos que tivemos picos de 5.82s (Considerando os 2 requests)

## ğŸš€ Evidencia dos Testes de Pico executados

![k6_pico_test_01](https://github.com/antoniogmartins/Performance/assets/35534493/fff94d71-90a8-434c-bc84-75a4f952665c)

![k6_pico_test_02](https://github.com/antoniogmartins/Performance/assets/35534493/f5076844-786c-494e-83a8-a1e0175bb703)

## ğŸš€  Integracao Continua
Ã‰ possivel realizar os testes de performance(stress/carga/pico) utilizando o GitActions configurado em: //github/workflows/k6.yml
=> Sempre que uma versao do codigo do script de teste:  "K6_pap_teste_carga_performance.js" Ã© atualizado automaticamente Ã© gerado um job e os testes sÃ£o executados. Ao final serÃ£o exibidas as metricas dos testes

## ğŸš€ Evidencia dos Testes de Performance sendo executados direto do GitActions


## ğŸš€ Relatorio Final
Para uma melhor visualizacao de todos os membros do times Ã© possivel gerar um relatorio de execuÃ§Ã£o, a cada ciclo de testes, em formato html.


## ğŸš€ AnÃ¡lise Final
Foi observado que todos os testes passaram com exito, mas as apis envolvidas na execucao dos testes demonstraram que estao com o tempo de retorno acima do esperado: 2s, alÃ©m da ocorrÃªncia de algums falhas, sendo necessÃ¡ria uma revisao por parte da equipe de desenvolvimento

## ğŸš€ Fontes - DocumentaÃ§Ã£o da Api
https://restful-booker.herokuapp.com/apidoc/

## ğŸ“ License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
---
Feito com ğŸ’œ &nbsp;por Antonio Martins ğŸ‘‹ &nbsp;
[Meu linkedin](https://www.linkedin.com/in/antoniogoncmartins/)

